@{
    ViewBag.Title = "ASP.NET Articles";
}

<div data-role="content-primary">
    <ul data-bind="foreach: articles" data-role="listview" data-theme="d">
        <li>
            <a data-bind="attr: { href: urlForMobile, title: title }, click: $parent.onArticleClicked" >
                <!-- ko if: !cached -->
                <img data-bind="attr: { src: imageUrl, alt: title }" >
                <!-- /ko -->
                <h3 data-bind="text: title"></h3>
                <p data-bind="text: description"></p>
                <p class="ui-li-aside" data-bind="text: date"></p>
            </a>
        </li>
    </ul>
</div>
<p class="controls">
    <a href="#" data-bind="css: { disabled: currentPage() == 1 }, click: prevPageClicked" data-mini="true" data-inline="true" data-icon="arrow-l" data-role="button">Prev</a>
    <a href="#" data-bind="click: nextPageClicked" data-mini="true" data-inline="true" data-icon="arrow-r" data-iconpos="right" data-role="button">Next</a>
</p>

@section Scripts {
    <script type="text/javascript" src="~/Scripts/App/Models/Article.js"></script>
    <script type="text/javascript" src="~/Scripts/App/ViewModels/ArticlesViewModel.js"></script>
    <script type="text/javascript" src="~/Scripts/App/ViewModels/ArticlesOfflineViewModel.js"></script>

    <script type="text/javascript">

        $(function() {
            if (window.applicationOnline) {
                ko.applyBindings(new ArticlesViewModel());
            } else {
                ko.applyBindings(new ArticlesOfflineViewModel());
            }
        });

    </script>
}
